Convexity 常作为一种重要的优化方法，如果在凸场景下算法算法表现得不好，那么在其他情况下往往会更差。

# Definitions

## Convex sets
A set $\mathcal{X}$ in a vector space is *convex* if for any $a, b \in \mathcal{X}$ the line segment connecting $a$ and $b$ is also in $\mathcal{X}$. In mathematical terms this means that for all $\lambda \in [0, 1]$ we have

$$\lambda  a + (1-\lambda)  b \in \mathcal{X} \text{ whenever } a, b \in \mathcal{X}.$$

![image](https://user-images.githubusercontent.com/44680953/143719825-b700c40f-cb89-4971-94a3-24cad498291b.png)   
向量空间中的某一个集合里面，任意两点组成的向量依然属于该集合，那么这个集合就是凸的。

![image](https://user-images.githubusercontent.com/44680953/143719920-a7492b6c-63a6-4082-be3b-a3f39c17d3dd.png)  
两个凸集的交集，仍然是一个凸集。

## Convex function
Given a convex set $\mathcal{X}$, a function $f: \mathcal{X} \to \mathbb{R}$ is *convex* if for all $x, x' \in \mathcal{X}$ and for all $\lambda \in [0, 1]$ we have

$$\lambda f(x) + (1-\lambda) f(x') \geq f(\lambda x + (1-\lambda) x').$$

![image](https://user-images.githubusercontent.com/44680953/143720091-668cb2e7-09c0-4c75-a25f-2c890a92733d.png)  
中间的余弦函数不是凸函数。

## Jensen’s Inequality
Given a convex function $f$, *Jensen's inequality*  作为 convexity 的一般化定义:

$$\sum_i \alpha_i f(x_i)  \geq f\left(\sum_i \alpha_i x_i\right)    \text{ and }    E_X[f(X)]  \geq f\left(E_X[X]\right),$$

where $\alpha_i$ are nonnegative real numbers such that $\sum_i \alpha_i = 1$ and $X$ is a random variable.

实际上，凸函数就是：函数之和 > 和的函数。

我们把 *Jensen's inequality* 作用于 log 函数：
$$E_{Y \sim P(Y)}[-\log P(X \mid Y)] \geq -\log P(X),$$

since $\int P(Y) P(X \mid Y) dY = P(X)$.
This can be used in variational methods. Here $Y$ is typically the unobserved random variable, $P(Y)$ is the best guess of how it might be distributed, and $P(X)$ is the distribution with $Y$ integrated out. For instance, in clustering $Y$ might be the cluster labels and $P(X \mid Y)$ is the generative model when applying cluster labels.

# Properties

## Local Minima Are Global Minima
注意，尽管 local minima = global minia，然而 global minia 仍然可能存在多个或者一个也不存在。

## Below Sets of Convex Functions Are Convex
凸函数的任意子区间任然是一个凸函数。

## Convexity and Second Derivatives
一个函数的 hassian matrix 是半正定（多维函数） 或者 二阶导数大于等于0（一维函数），则该函数是凸函数。

Formally, a twice-differentiable one-dimensional function $f: \mathbb{R} \rightarrow \mathbb{R}$ is convex
if and only if its second derivative $f'' \geq 0$. For any twice-differentiable multi-dimensional function $f: \mathbb{R}^{n} \rightarrow \mathbb{R}$,
it is convex if and only if its Hessian $\nabla^2f \succeq 0$ (positive semidefinite), denoting the Hessian matrix $\nabla^2f$ by $\mathbf{H}$,
$\mathbf{x}^\top \mathbf{H} \mathbf{x} \geq 0$
for all $\mathbf{x} \in \mathbb{R}^n$.
